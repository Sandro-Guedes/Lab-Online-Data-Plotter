<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">



<title>Notes on Online Laboratory Data Plotter 1.2.1 - beta version</title>










</head>

<body>




<h1 class="title toc-ignore">Notes on Online Laboratory Data Plotter 1.2.1 - beta version</h1>


<div id="TOC">
<ul>
<li><a href="#instructions"><span class="toc-section-number">1</span> Instructions</a><ul>
<li><a href="#features-common-to-both-panels"><span class="toc-section-number">1.1</span> Features common to both panels</a><ul>
<li><a href="#input-methods"><span class="toc-section-number">1.1.1</span> Input methods</a></li>
<li><a href="#exporting-data"><span class="toc-section-number">1.1.2</span> Exporting data</a></li>
<li><a href="#settings-common-to-both-panels"><span class="toc-section-number">1.1.3</span> Settings common to both panels</a></li>
</ul></li>
<li><a href="#scatter-panel"><span class="toc-section-number">1.2</span> Scatter panel</a><ul>
<li><a href="#input-table-and-plot-creation"><span class="toc-section-number">1.2.1</span> Input table and plot creation</a></li>
<li><a href="#linear-regression"><span class="toc-section-number">1.2.2</span> Linear regression</a></li>
</ul></li>
<li><a href="#histogram-panel"><span class="toc-section-number">1.3</span> Histogram panel</a><ul>
<li><a href="#input-table-and-plot-creation-1"><span class="toc-section-number">1.3.1</span> Input table and plot creation</a></li>
</ul></li>
<li><a href="#known-issues"><span class="toc-section-number">1.4</span> Known issues</a></li>
</ul></li>
<li><a href="#details"><span class="toc-section-number">2</span> Details</a></li>
<li><a href="#references">References</a></li>
</ul>
</div>

<div id="instructions" class="section level1">
<h1><span class="header-section-number">1</span> Instructions</h1>
<p>Two panels are available, one for plotting scatter graphs and other for plotting histograms, which work independently.</p>
<div id="features-common-to-both-panels" class="section level2">
<h2><span class="header-section-number">1.1</span> Features common to both panels</h2>
<div id="input-methods" class="section level3">
<h3><span class="header-section-number">1.1.1</span> Input methods</h3>
<p>There are two input methods:</p>
<ol style="list-style-type: decimal">
<li><p>Typing the data manually and using tab or return keys to jump to the next cell. Excel-like selection of cells are also available. Adding or removing lines as well as certain formatting features are available by right-clicking.</p></li>
<li><p>Copying and pasting from Excel-like softwares.</p></li>
</ol>
</div>
<div id="exporting-data" class="section level3">
<h3><span class="header-section-number">1.1.2</span> Exporting data</h3>
<p>Data can be exported by clicking on the download button bellow input tables and bellow the results table on the histogram panel. Data is exported to a csv (comma separated values) file with headers and can be imported by most of data treatment softwares (Origin, Excel, etc).</p>
</div>
<div id="settings-common-to-both-panels" class="section level3">
<h3><span class="header-section-number">1.1.3</span> Settings common to both panels</h3>
<p><strong>Axes titles: x title, y title</strong>: Titles for <em>y</em> and <em>x</em> axes can be typed using plotmath syntax (<a href="https://stat.ethz.ch/R-manual/R-devel/library/grDevices/html/plotmath.html" class="uri">https://stat.ethz.ch/R-manual/R-devel/library/grDevices/html/plotmath.html</a>). Character expressions should be quoted and symbols unquoted. The <code>*</code> is used to concatenate pieces of strings. Examples:<br />
<br></p>
<p><strong>Table 1.</strong> Examples of typing using plotmath syntax.</p>
<table style="width:69%;">
<colgroup>
<col width="31%"></col>
<col width="37%"></col>
</colgroup>
<thead>
<tr class="header">
<th>text typed</th>
<th>text displayed</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>“angular velocity,”*dot(theta)*&quot; (rad/s)“</td>
<td>angular velocity, <span class="math inline">\(\dot\theta\)</span> (rad/s)</td>
</tr>
<tr class="even">
<td>x[1]^2 or x[1]**2</td>
<td><span class="math inline">\(x_1^2\)</span></td>
</tr>
<tr class="odd">
<td>Delta*y</td>
<td><span class="math inline">\(\Delta y\)</span></td>
</tr>
</tbody>
</table>
<p><br> <strong>Axes scale: min x, max x, min y, max y</strong>: Minimum and maximum values for the axes scales can be set manually. If the fields are left blank, the graph is automatically rescaled. <br> <strong>Decimal places</strong> show the number of decimal places (1-5) in numbers entered on the table.</p>
</div>
</div>
<div id="scatter-panel" class="section level2">
<h2><span class="header-section-number">1.2</span> Scatter panel</h2>
<div id="input-table-and-plot-creation" class="section level3">
<h3><span class="header-section-number">1.2.1</span> Input table and plot creation</h3>
<p>The columns of the input table are:</p>
<table>
<tbody>
<tr class="odd">
<td>X:</td>
<td>values for the variable in the x-axis</td>
</tr>
<tr class="even">
<td>DX:</td>
<td>uncertainties of the values for the variable in the x-axis</td>
</tr>
<tr class="odd">
<td>Y:</td>
<td>values for the variable in the y-axis</td>
</tr>
<tr class="even">
<td>DY:</td>
<td>uncertainties of the values for the variable in the y-axis</td>
</tr>
</tbody>
</table>
<p>The scatter graph is created as the user types the data. Uncertainty bars are added as the user types the uncertainty values.</p>
<p>A Log-Log chart, using the same data, is created by checking the <strong>show log-log</strong> box.A straight fitted line can be drawn on the Log-Log chart by checking the <strong>show fitted straight line</strong> box.</p>
</div>
<div id="linear-regression" class="section level3">
<h3><span class="header-section-number">1.2.2</span> Linear regression</h3>
<p>The linear model is:</p>
<p><span class="math display">\[
\begin{equation}
y = a x + b
\tag{1}
\end{equation}
\]</span> To carry out a linear regression with the inputted data, check the <strong>linear regression</strong> box on the <strong>Graph settings</strong> panel. Linear and angular coefficients, with the uncertainties, will be displayed bellow the checkbox and the regression line will be plotted in red. If uncertaints <span class="math inline">\(\sigma_x\)</span> (column DX) and <span class="math inline">\(\sigma_y\)</span> (column DY) are given, the Deming regression <span class="citation">(Deming 1964)</span>, which is a special case of the Total Least Squares calculation <span class="citation">(Van Huffel and Vandewalle 1991)</span>, is performed with the <code>deming()</code> function of the <em>deming</em> package <span class="citation">(Therneau 2014)</span>. If only <span class="math inline">\(\sigma_y\)</span> is given, the Weighted Least Squares (WTS) calculation is carried out using the formulas given by <span class="citation">Bevington and Robinson (2003)</span>. In case, no uncertainties or only <span class="math inline">\(\sigma_x\)</span> is given, the Simple Least Squares calculation is performed using the <code>lm()</code> function of the <em>stat</em> package <span class="citation">(R Core Team 2016)</span>. The linear model coefficients will be given with a subindex identifying the type of calculation:<br />
<br></p>
<ol style="list-style-type: decimal">
<li>Deming Regression<br />
</li>
<li>Weighted Least Squares<br />
</li>
<li>Simple Least Squares</li>
</ol>
<p><br></p>
<p>The WTS holds for the case in which only <span class="math inline">\(\sigma_y\)</span> is given. However, it is possible to take the uncertainty <span class="math inline">\(\sigma_x\)</span> into account. In case only <span class="math inline">\(\sigma_x\)</span> is given, one may invert the linear model in such a way that <span class="math inline">\(\sigma_x\)</span> becomes <span class="math inline">\(\sigma_y\)</span>. If, for any reason, the model cannot be inverted, exchange variables X and Y, carry out WTS and apply the due transformations to get the correct information:</p>
<p><br></p>
<p><strong>Table 2.</strong> Conversion of model coefficients for regression with inverted model</p>
<table style="width:69%;">
<colgroup>
<col width="31%"></col>
<col width="37%"></col>
</colgroup>
<thead>
<tr class="header">
<th>WTS coefficients for the inverted model</th>
<th>transformation to original model coefficients</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(a\)</span></td>
<td><span class="math inline">\(\frac{1}{a}\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(\Delta a\)</span></td>
<td><span class="math inline">\(\frac{\Delta a}{a^2}\)</span></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(b\)</span></td>
<td><span class="math inline">\(- \frac{b}{a}\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(\Delta b\)</span></td>
<td><span class="math inline">\(\frac{b}{a} \sqrt{\left( \frac{\Delta a}{a} \right)^2 + \left( \frac{\Delta b}{b} \right)^2}\)</span></td>
</tr>
</tbody>
</table>
<p><br></p>
<p><span class="citation">Bevington and Robinson (2003)</span> suggest an approximation to consider the uncertainty in the x variable. It consists in estimating the indirect contribution of <span class="math inline">\(\sigma_x\)</span> to <span class="math inline">\(\sigma_y\)</span> through the differential:<br />
<span class="math display">\[
\begin{equation}
\sigma_{yI} = \sigma_x \frac{dy}{dx} 
\tag{2}
\end{equation}
\]</span> Then, combining it with the direct contribution for the y uncertainty, <span class="math inline">\(\sigma_{yD}\)</span>:</p>
<p><span class="math display">\[
\begin{equation}
\sigma_y^2 = \sigma_{yI}^2 + \sigma_{yD}^2
\tag{3}
\end{equation}
\]</span> To calculate the derivative, a first approximation of the model parameters must be known. One could run a simple linear regression, obtain the model parameters and then, after calculating the values of <span class="math inline">\(\sigma_y\)</span> with Eq. 3, run WTS.</p>
<p><strong>CAUTION</strong>: For type 1 calculation, X, DX, Y and DY must have the same length. For type 2 calculation, X, Y and DY must have the same length and DX must be empty. For type 3 calculation, DX and DY must be empty.</p>
</div>
</div>
<div id="histogram-panel" class="section level2">
<h2><span class="header-section-number">1.3</span> Histogram panel</h2>
<div id="input-table-and-plot-creation-1" class="section level3">
<h3><span class="header-section-number">1.3.1</span> Input table and plot creation</h3>
<p>There are 30 named columns (col1 … col30). Each column will be used to build one histogram. On the <strong>Histogram settings</strong> box choose the number of columns to be considered for calculation and then choose the histogram to be shown. The histogram will be created as data are inputted. Mean and standard deviation for each selected column appear on the table above the histogram. The mean values are calculated with the <code>mean()</code> function of the <em>base</em> package <span class="citation">(R Core Team 2016)</span>. The standard deviation is calculated with the <code>sd()</code> function of the <em>stats</em> package <span class="citation">(R Core Team 2016)</span>.</p>
<p><strong>Bin size</strong> and <strong>Bin boundary</strong> are set manually. After scrutiny of the data to identify the lowest and highest values, a first guess for bin size is obtained applying the formula:</p>
<p><span class="math display">\[
\begin{equation}
\text{bin size}=\frac{\text{(highest value)} - \text{(lowest value)} }{\sqrt{\text{number of data values}}}
\tag{4}
\end{equation}
\]</span> <strong>Bin boundary</strong> may be initially set as the lowest data value. Note tha the values will be grouped in intervals closed on the left border.</p>
<p>To superimpose the normal (Gaussian) curve on the histogram, check the <strong>show normal curve</strong> box. The curve will appear in red.</p>
<p><strong>Important:</strong> only data in selected columns will be exported using the download button.</p>
</div>
</div>
<div id="known-issues" class="section level2">
<h2><span class="header-section-number">1.4</span> Known issues</h2>
<ol style="list-style-type: decimal">
<li><p>The input tables do accept scientific notation as an input method, but do not display values in scientic notation. Users should be careful about the choice of scale.</p></li>
<li><p>It is still not possible to upload data as a method of input.</p></li>
<li><p>Typing too fast may cause application to go into a loop. A workaround is to switch tabs for a while.</p></li>
<li><p>Pasting datasets with more lines than the input table will cause the application to crash. Before pasting data be sure that the number of lines on the input table (default is 200) is equal or greater to the number of lines in the dataset. More lines can be created by right-clicking.</p></li>
</ol>
</div>
</div>
<div id="details" class="section level1">
<h1><span class="header-section-number">2</span> Details</h1>
<p>Online Laboratory Data Plotter is a R Shiny <span class="citation">(Chang et al. 2017)</span> application for plotting simple scatter graphs and histograms. The following packages, besides R base <span class="citation">(R Core Team 2016)</span>, were used to build the application:<br />
<br> shiny - <span class="citation">Chang et al. (2017)</span><br />
rhandsontable - <span class="citation">Owen (2016)</span><br />
stats - <span class="citation">R Core Team (2016)</span><br />
scales - <span class="citation">Wickham (2016)</span><br />
deming - <span class="citation">Therneau (2014)</span><br />
<br> <strong>Version date: August 22th, 2019</strong><br />
<strong>Authors: Sandro Guedes de Oliveira and Arnaldo Luis Lixandrão Filho</strong><br />
<em>Department of Cosmic Rays and Chronology - Physics Institute &quot;Gleb Wataghin&quot; - University of Campinas</em></p>
</div>
<div id="references" class="section level1 unnumbered">
<h1>References</h1>
<div id="refs" class="references">
<div id="ref-Bevington">
<p>Bevington, P.R., and D.K. Robinson. 2003. <em>Data Reduction and Error Analysis for the Physical Sciences</em>. McGraw-Hill Higher Education. McGraw-Hill. <a href="https://books.google.com.br/books?id=0poQAQAAIAAJ" class="uri">https://books.google.com.br/books?id=0poQAQAAIAAJ</a>.</p>
</div>
<div id="ref-Shiny">
<p>Chang, Winston, Joe Cheng, JJ Allaire, Yihui Xie, and Jonathan McPherson. 2017. <em>Shiny: Web Application Framework for R</em>. <a href="https://CRAN.R-project.org/package=shiny" class="uri">https://CRAN.R-project.org/package=shiny</a>.</p>
</div>
<div id="ref-Deming1964">
<p>Deming, W.E. 1964. <em>Statistical Adjustment of Data</em>. Dover Books on Mathematics Series. Dover Publications.</p>
</div>
<div id="ref-Rhandsontable">
<p>Owen, Jonathan. 2016. <em>Rhandsontable: Interface to the ’Handsontable.js’ Library</em>. <a href="https://CRAN.R-project.org/package=rhandsontable" class="uri">https://CRAN.R-project.org/package=rhandsontable</a>.</p>
</div>
<div id="ref-R">
<p>R Core Team. 2016. <em>R: A Language and Environment for Statistical Computing</em>. Vienna, Austria: R Foundation for Statistical Computing. <a href="https://www.R-project.org/" class="uri">https://www.R-project.org/</a>.</p>
</div>
<div id="ref-Deming">
<p>Therneau, Terry. 2014. <em>Deming: Deming, Thiel-Sen and Passing-Bablock Regression</em>. <a href="https://CRAN.R-project.org/package=deming" class="uri">https://CRAN.R-project.org/package=deming</a>.</p>
</div>
<div id="ref-vanHuffel1991">
<p>Van Huffel, S., and J. Vandewalle. 1991. <em>The Total Least Squares Problem: Computational Aspects and Analysis</em>. Frontiers in Applied Mathematics. Society for Industrial and Applied Mathematics.</p>
</div>
<div id="ref-Scales">
<p>Wickham, Hadley. 2016. <em>Scales: Scale Functions for Visualization</em>. <a href="https://CRAN.R-project.org/package=scales" class="uri">https://CRAN.R-project.org/package=scales</a>.</p>
</div>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
